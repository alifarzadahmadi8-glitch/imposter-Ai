<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Imposter App</title>

<style>
body {
  margin:0;
  background:#0b0e1a;
  color:white;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
}
.screen { display:none; padding:20px; min-height:100vh; text-align:center; }
.active { display:block; }
.card {
  background:#161a33;
  border-radius:18px;
  padding:20px;
  max-width:420px;
  margin:auto;
}
button {
  width:100%;
  padding:15px;
  font-size:18px;
  border:none;
  border-radius:14px;
  background:#6c7cff;
  color:white;
}
img {
  width:100%;
  border-radius:12px;
  margin:15px 0;
}
select,input {
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin:10px 0;
}
</style>
</head>

<body>

<div id="setup" class="screen active">
  <div class="card">
    <h1>IMPOSTER</h1>
    <input id="players" type="number" min="3" max="10" value="5">
    <select id="imposters">
      <option value="1">1 Imposter</option>
      <option value="2">2 Imposters</option>
    </select>
    <select id="category"></select>
    <select id="troll">
      <option value="off">Normal Mode</option>
      <option value="on">ðŸ¤¡ Troll Imposter Mode</option>
    </select>
    <button onclick="start()">Start</button>
  </div>
</div>

<div id="pass" class="screen">
  <div class="card">
    <h2 id="passText"></h2>
    <p>ðŸ”’ Screen Hidden</p>
    <button onclick="reveal()">Reveal</button>
  </div>
</div>

<div id="reveal" class="screen">
  <div class="card">
    <h2 id="playerTitle"></h2>
    <h1 id="role"></h1>
    <img id="image">
    <h2 id="word"></h2>
    <button onclick="next()">Hide & Pass</button>
  </div>
</div>

<div id="end" class="screen">
  <div class="card">
    <h1>DISCUSS & VOTE</h1>
    <button onclick="location.reload()">New Game</button>
  </div>
</div>

<script>
const categories = {
  "Football Players": ["Messi","Ronaldo","Mbappe","Haaland"],
  "Football 2": ["Panav Singh"],
  "Countries": ["Canada","Brazil","France","Japan"],
  "Cities": ["Toronto","London","Paris","Tokyo"],
  "Clash Royale": ["Mega Knight","Hog Rider","Pekka"],
  "Fun â€“ Troll": ["Worst excuse","Biggest lie","Most overrated thing"]
};

const imageURL = (cat, word) => {
  if(cat==="Countries") return `https://flagcdn.com/w320/${word.slice(0,2).toLowerCase()}.png`;
  return `https://source.unsplash.com/400x300/?${word}`;
};

const catSelect=document.getElementById("category");
Object.keys(categories).forEach(c=>{
  let o=document.createElement("option");
  o.value=c; o.textContent=c;
  catSelect.appendChild(o);
});

let total,roles=[],current=1,word,troll;

function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function start(){
  total=+players.value;
  troll=trollSelect.value;
  const imp=+imposters.value;
  const list=categories[category.value];
  word=list[Math.floor(Math.random()*list.length)];
  roles=Array(total).fill("Crewmate");
  while(roles.filter(r=>r==="Imposter").length<imp){
    roles[Math.floor(Math.random()*total)]="Imposter";
  }
  passText.textContent="Pass to Player 1";
  show("pass");
}

function reveal(){
  playerTitle.textContent="Player "+current;
  const r=roles[current-1];
  role.textContent=r;
  let shownWord = (r==="Imposter" && troll==="on") ? "Something else ðŸ˜ˆ" : (r==="Imposter"?"???":word);
  wordEl.textContent=shownWord;
  image.src=imageURL(category.value,shownWord);
  show("reveal");
}

function next(){
  current++;
  if(current>total) show("end");
  else{
    passText.textContent="Pass to Player "+current;
    show("pass");
  }
}
</script>

</body>
</html>
